---
import { getCollection, CollectionEntry } from "astro:content";
import BaseLayout from "../../layouts/Base.astro";

import FormattedDate from "../../components/FormattedDate.astro";

export async function getStaticPaths() {
  const entries = await getCollection("blog");
  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: entry,
  }));
}
type Props = CollectionEntry<"blog">;

const entry = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout title={entry.data.title}>
  <main>
    <h1>{entry.data.title}</h1>
    <sub>{entry.data.summary}</sub>
    <FormattedDate timestamp={entry.data.publishDate} />
    <article class="text-content">
      <Content />
    </article>
    <a href="/blog"><span>&larr;</span>Back to Blog</a>
  </main>
</BaseLayout>
