---
import BaseLayout from "../layouts/Base.astro";
import SocialButtons from "../components/SocialButtons.astro";
---

<BaseLayout title="Kevin Castro's Portfolio">
  <main>
    <h1>Hi there!</h1>
    <h1>I'm <span class="text-gradient">Kevin Castro</span></h1>
    <h2 class="subtitle">
      <code id="position"></code> Software Engineer
    </h2>
    <p class="elevator-pitch">
      Full-stack software engineer with a penchant for automation and security.
      Strong advocate for underrepresented users and software accessibility.
      Experienced with Full-stack development in the <code>MERN</code> stack and
      <code>Python</code>.
    </p>
    <SocialButtons />
    <div class="resume">
      <a href="Kevin-Castro-Resume.pdf" download>Download Resume</a>
    </div>
  </main>
</BaseLayout>

<script>
  const POSITION_TEXT_INTERVAL_MS = 4000;
  const positionElement = document.querySelector("#position")!;

  const fadeInOutKeyframes = [
    { opacity: 0 },
    { opacity: 1 },
    { opacity: 1 },
    { opacity: 0 },
  ];
  const setPositionTextContent = (text: string) => {
    positionElement.textContent = text;
  };

  let index = 0;
  const positions = ["Full-Stack", "Back-end", "Front-end"];
  let position = positions[index];

  setPositionTextContent(position);
  positionElement.animate(fadeInOutKeyframes, POSITION_TEXT_INTERVAL_MS);

  setInterval(() => {
    index++;
    if (index === positions.length) {
      index = 0;
    }
    position = positions[index];
    setPositionTextContent(position);
    // add 10ms as a buffer to prevent blinking
    positionElement.animate(fadeInOutKeyframes, POSITION_TEXT_INTERVAL_MS + 10);
  }, POSITION_TEXT_INTERVAL_MS);
</script>

<style>
  main {
    margin: auto;
    padding: 1.5rem;
    max-width: 60ch;
    overflow: auto;
  }
  h1 {
    font-size: 3rem;
    font-weight: 800;
    margin: 0;
  }
  .text-gradient {
    background-image: var(--accent-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 400%;
    background-position: 0%;
  }
  .subtitle {
    text-align: right;
  }
  .elevator-pitch {
    line-height: 1.6;
    margin: 1rem 0;
    border: 1px solid rgba(var(--accent), 25%);
    background-color: white;
    padding: 1rem;
    border-radius: 0.4rem;
  }
  .elevator-pitch code {
    font-size: 0.875em;
    font-weight: bold;
    background: rgba(var(--accent), 12%);
    color: rgb(var(--accent));
    border-radius: 4px;
    padding: 0.3em 0.45em;
  }
  .elevator-pitch strong {
    color: rgb(var(--accent));
  }
  .resume {
    display: flex;
    justify-content: center;
  }
  .resume a {
    /* TODO: button-ify link */
  }
</style>
